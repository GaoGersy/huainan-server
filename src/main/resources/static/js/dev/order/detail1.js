require(["../../requireconfig"],function(){require(["zepto","vue","vue-resource","layer","global","air"],function(t,o,e,i,a,d){({init:function(){var t=this;o.use(e),t.index=new o({el:"#app",data:{map:"",zoom:12,marker:"",infoWin:"",bounds:"",SouthWestX:"",SouthWestY:"",NorthEastX:"",NorthEastY:"",dataId:a.getUrl("dataId"),orderDetail:[],satelliteId:"",sensorId:"",productId:"",sceneId:"",applyState:"",disstate:a.getUrl("disstate"),bottomLeftLatitude:"",bottomLeftLongitude:"",bottomRightLatitude:"",bottomRightLongitude:"",topRightLatitude:"",topRightLongitude:"",topLeftLatitude:"",topLeftLongitude:"",LonAndLat:""},methods:{onLoad:function(t,o){var e=this;e.map=new T.Map("mapDiv"),e.map.centerAndZoom(new T.LngLat(t,o),12)},getOrderDetail:function(){var t=this,o={dataid:t.dataId},e=a.baseUrlgch+"order/getBasSateliteTerm";t.$http.post(e,o).then(function(o){if(200==o.data.code){$(".bottom-data").show(),console.log("vm.isShow"+t.isShow),t.orderDetail=o.data.data,t.satelliteId=t.orderDetail.satelliteid,t.sensorId=t.orderDetail.sensorid,"PMS1"==t.sensorId||"PMS2"==t.sensorId?t.sensorId="全色/多光谱":t.sensorId="多光谱",t.productId=t.orderDetail.productid,t.sceneId=t.orderDetail.sceneid,0==t.disstate?t.applyState="未审核":1==t.disstate?t.applyState="审核通过":t.applyState="未通过","GF1"==t.satelliteId?t.satelliteId="高分一号":"GF2"==t.satelliteId?t.satelliteId="高分二号":"GF3"==t.satelliteId?t.satelliteId="高分三号":"GF4"==t.satelliteId&&(t.satelliteId="高分四号"),t.bottomLeftLatitude=t.orderDetail.bottomleftlatitude,t.bottomLeftLongitude=t.orderDetail.bottomleftlongitude,t.bottomRightLatitude=t.orderDetail.bottomrightlatitude,t.bottomRightLongitude=t.orderDetail.bottomrightlongitude,t.topRightLatitude=t.orderDetail.toprightlatitude,t.topRightLongitude=t.orderDetail.toprightlongitude,t.topLeftLatitude=t.orderDetail.topleftlatitude,t.topLeftLongitude=t.orderDetail.topleftlongitude,console.log(t.orderDetail.topleftLongitude),t.onLoad(t.bottomLeftLatitude,t.bottomLeftLongitude);var e=[];e.push(new T.LngLat(t.bottomRightLongitude,t.bottomRightLatitude)),e.push(new T.LngLat(t.bottomLeftLongitude,t.bottomLeftLatitude)),e.push(new T.LngLat(t.topLeftLongitude,t.topLeftLatitude)),e.push(new T.LngLat(t.topRightLongitude,t.topRightLatitude)),t.LonAndLat="("+t.bottomRightLongitude+","+t.bottomRightLatitude+"),("+t.bottomLeftLongitude+","+t.bottomLeftLatitude+"),("+t.topLeftLongitude+","+t.topLeftLatitude+"),("+t.topRightLongitude+","+t.topRightLatitude+")",console.log(t.LonAndLat),t.map.panTo(new T.LngLat(t.bottomRightLongitude,t.bottomRightLatitude)),t.map.setZoom(9);var i=new T.Polygon(e,{color:"red",weight:2,opacity:.5,fillColor:"#FFFFFF",fillOpacity:.5});t.map.addOverLay(i)}else a.popupMobile.msg("请求失败1")},function(){a.popupMobile.msg("请求失败2")}),setTimeout(function(){$(".loading").hide()},500)},upAndDown:function(t){var o=$(t.currentTarget);o.is(".down")?(o.addClass("up").removeClass("down"),$(".bottom-data").css("bottom",-120)):(o.addClass("down").removeClass("up"),$(".bottom-data").css("bottom",0)),console.log($(t.currentTarget).is(".down"))}},mounted:function(){var t=this;t.getOrderDetail(),$(".detail").on("touchstart",function(o){t.map.disableDrag(),o.stopPropagation()}),$(".detail").on("touchmove",function(o){t.map.disableDrag(),o.stopPropagation()}),$(".detail").on("touchend",function(o){setTimeout(function(){t.map.enableDrag()},2e3)}),$(".detail").on("swipe",function(o){t.map.disableDrag(),o.stopPropagation()}),$(".detail").on("swipeLeft",function(o){t.map.disableDrag(),o.stopPropagation()}),$(".detail").on("swipeRight",function(o){t.map.disableDrag(),o.stopPropagation()}),$(".detail").on("swipeUp",function(o){t.map.disableDrag(),o.stopPropagation()}),$(".detail").on("swipeDown",function(o){t.map.disableDrag(),o.stopPropagation()})}})}}).init()})});